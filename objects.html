<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=0.5, maximum-scale=0.5,minimum-scale=0.5, target-densitydpi=medium-dpi" />
    <title></title>
    <link rel="stylesheet" href="css/fonts/PTSans/stylesheet.css" type="text/css">
    <link rel="stylesheet" href="css/jqmobile/jquery.mobile-1.4.4.min.css" />
    <script src="js/jq.min.js"></script>
    <script src="js/jquery.mobile-1.4.4.min.js"></script>
    <script type="text/javascript" src="js/highcharts.js"></script>
    <script type="text/javascript" src="js/hc-theme.js"></script>
    <script src="http://api-maps.yandex.ru/2.0.18/?load=package.standard,package.clusters&lang=ru-RU" type="text/javascript"></script>
    <!--<script src="http://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>-->

    <link rel="stylesheet" type="text/css" href="css/common.css">
    <link rel="stylesheet" type="text/css" href="css/objects.css">
    <link rel="stylesheet" type="text/css" href="css/filters.css">
    <link rel="stylesheet" type="text/css" href="css/object_view.css">
</head>
<body >
<div class="status-bar"></div>
<div id="left-menu">
    <div id='logo' class="menu-picture"></div>
    <hr class="under-logo">
    <div class="menu">
        <a href="empl.html" data-ajax="false">
            <div class="menu-item ">
                <div class="menu-picture empl-menu-picture "></div>
                <div class="menu-item-text">Кадры</div>
            </div>
        </a>

        <a href="objects.html" data-ajax="false">
            <div class="menu-item menu-item-active">
                <div class="menu-picture obj-menu-picture"></div>
                <div class="menu-item-text">Объекты</div>
            </div>
        </a>

        <a href="organizations.html" data-ajax="false">
            <div class="menu-item">
                <div class="menu-picture contractors-menu-picture "></div>
                <div class="menu-item-text">Подрядчики</div>
            </div>
        </a>
        <hr class="menu-item-devider">
        <a href="tenders.html" data-ajax="false">
            <div class="menu-item ">
                <div class="menu-picture tenders-menu-picture "></div>
                <div class="menu-item-text">Конкурсы</div>
            </div>
        </a>
        <hr class="menu-item-devider">
        <a href="sales.html" data-ajax="false">
            <div class="menu-item">
                <div class="menu-picture sales-menu-picture "></div>
                <div class="menu-item-text">Продажи</div>
            </div>
        </a>
    </div>
</div>
    <div class="right-side" data-role="page" id='charts'>
        <!--<div data-role="header" data-position="fixed">-->
        <div data-role="header">
            <h1>Объекты</h1>
        </div>
        <div data-role="content">
            <div class="content-side" data-role="none" id="charts-content">
                <div>
                    <form>
                        <fieldset data-role="controlgroup" data-type="horizontal" id="documents-filter">
                            <input type="radio" name="document" id="radio-choice-h-2a" data-title="ГПЗУ" data-value="GPZU" checked="checked">
                            <label for="radio-choice-h-2a">ГПЗУ</label>
                            <input type="radio" name="document" id="radio-choice-h-2b" data-title="Экспертиза" data-value="MGE" >
                            <label for="radio-choice-h-2b">Экспертиза</label>
                            <input type="radio" name="document" id="radio-choice-h-2c" data-title="Разрешение на строительство" data-value="razresh" >
                            <label for="radio-choice-h-2c">Разрешение</label>
                            <input type="radio" name="document" id="radio-choice-h-3c" data-title="Погашение банковской гарантии" data-value="bank_garant" >
                            <label for="radio-choice-h-3c">Банковская гарантия</label>
                            <input type="radio" name="document" id="radio-choice-h-4c" data-title="Выполнение сноса" data-value="destroy" >
                            <label for="radio-choice-h-4c">Снос</label>
                        </fieldset>
                    </form>
                </div>
                <div>
                    <div id='document-chart' style="width: 600px; height: 900px; float: left "></div>
                    <div id='finance-chart' style="width: 600px; height: 900px; float: right"></div>
                    <div id='work-chart' style="width: 1250px; height: 250px; float: left; margin-top: 50px"></div>
                </div>
            </div>
            <div class="content-side" data-role="none" id="list-content">
                <div>
                    <ul data-role="listview" id="objects-list" class="object-list" data-filter="true" data-filter-placeholder="Поиск объекта по названию…" data-inset="true"></ul>
                </div>
            </div>
            <div class="content-side" data-role="none" id="map-content">
               <div id='map' style="height: 1200px"></div>
                <div id="legend">
                    <div class="row"><div style="height:10px; width:20px; background:#158B02; float: left; margin-top: 5px;"></div><div>Жилой дом</div></div>
                    <div class="row"><div style="height:10px; width:20px; background:#A41DE2; float: left; margin-top: 5px;"></div><div>Дошкольное образовательное учреждение</div></div>
                    <div class="row"><div style="height:10px; width:20px; background:#E666DD; float: left; margin-top: 5px;"></div><div>Блок начальных классов</div></div>
                    <div class="row"><div style="height:10px; width:20px; background:#E03632; float: left; margin-top: 5px;"></div><div>Школа</div></div>
                    <div class="row"><div style="height:10px; width:20px; background:#0A6CC8; float: left; margin-top: 5px;"></div><div>Физкультурно-оздоровительный комплекс</div></div>
                    <div class="row"><div style="height:10px; width:20px; background:#143A6B; float: left; margin-top: 5px;"></div><div>Переход</div></div>
                    <div class="row"><div style="height:10px; width:20px; background:rgb(143,143,143); float: left; margin-top: 5px;"></div><div>Прочее</div></div>
                </div>
            </div>
            <div class="content-side" data-role="none" id="list-overdue-content">
                <div>
                    <ul data-role="listview" id="ovedue-objects-list" class="object-list" >
                    </ul>
                </div>
            </div>
            <div class="filter-side" data-role="none" id = "object-filter">
                  <div class="">Вид:
                      <button id='chart-button' class="ui-btn ui-btn-inline ui-btn-b">График</button>
                      <button id='list-button' class="ui-btn ui-btn-inline">Списком</button>
                      <button id='map-button' class="ui-btn ui-btn-inline">На карте</button>
                  </div>
                <div class="filter-part">
                    <input type="checkbox" data-role="none" checked id="checkbox-all-appointments">
                    <label for="checkbox-all-appointments">Объекты</label>
                    <span id="select-all-appointments" class="add-filters-action">Выделить все</span>
                </div>

                <div class="appointment-filter filter" >
                    <div class="group-filter">
                        <div class="group-filter-header group-filter-header-first">
                            <input type="checkbox" data-role="none" checked id="select-all-living">
                            <label for="select-all-living">Жилище</label>
                            <span class="add-filters-action">Снять выделение</span>
                        </div>
                        <div class="appointments appointment-filter ">
                            <input type="checkbox" data-role="none" data-value="жилье" checked id="ap1">
                            <label for="ap1">Жилье</label>
                            <input type="checkbox" data-role="none" data-value="инженерия" checked id="ap3">
                            <label for="ap3">Инженерия</label>
                        </div>
                    </div>
                    <div class="group-filter">
                        <div class="group-filter-header">
                            <input type="checkbox" data-role="none" checked id="select-all-social">
                            <label for="select-all-social">Социалька</label>
                            <span class="add-filters-action">Снять выделение</span>
                        </div>

                        <div class="appointments appointment-filter ">
                            <input type="checkbox" data-role="none" data-value="БНК" checked id="ap4">
                            <label for="ap4">БНК</label>
                            <input type="checkbox" data-role="none" data-value="ДОУ" checked id="ap5">
                            <label for="ap5">ДОУ</label>
                            <input type="checkbox" data-role="none" data-value="ФОК" checked id="ap6">
                            <label for="ap6">ФОК</label>
                            <input type="checkbox" data-role="none" data-value="Спорт - ФОК" checked id="ap7">
                            <label for="ap7">Спорт-ФОК</label>
                            <input type="checkbox" data-role="none" data-value="школа" checked id="ap8">
                            <label for="ap8">Школа</label>
                            <input type="checkbox" data-role="none" data-value="Поликлиника" checked id="ap9">
                            <label for="ap9">Поликлиника</label>
                        </div>
                    </div>
                    <div class="group-filter">
                        <div class="group-filter-header">
                            <input type="checkbox" data-role="none" checked id="select-all-other">
                            <label for="select-all-other">Прочие</label>
                            <span class="add-filters-action">Снять выделение</span>
                        </div>
                        <div class="appointments appointment-filter others">
                            <input type="checkbox" data-role="none" data-value="Поликлиника" checked id="ap10">
                            <label for="ap10">Дороги</label>
                            <input type="checkbox" data-role="none" data-value="переход" checked id="ap11">
                            <label for="ap11">Переход</label>
                            <input type="checkbox" data-role="none" data-value="Прочие объекты" checked id="ap12">
                            <label for="ap12">Прочие</label>
                        </div>
                    </div>
                </div>

                <div class="filter-part">
                    <input type="checkbox" data-role="none" checked id="select-all-distincts">
                    <label for="select-all-distincts" style="width: auto">Округ</label>
                    <span class="add-filters-action">Снять выделение</span>
                </div>
                <div class="distinct-filter filter">
                    <div class="group-filter">
                        <div class="distincts"></div>
                    </div>
                </div>

                <div class="filter-part">
                    <input type="checkbox" data-role="none" checked id="select-all-years">
                    <label for="select-all-years" style="width: auto">Годы</label>
                    <span class="add-filters-action">Снять выделение</span>
                </div>
                <div class="distinct-filter filter">
                    <div class="group-filter">
                        <div class="years"></div>
                    </div>
                </div>

            </div>
        </div><!-- /content -->
    </div>
    <!--<div class="right-side" data-role="page" id="object-view">-->

    <!--</div>-->
</body>

<script type="text/javascript" src="js/my_common_scripts.js"></script>
<script type="text/javascript" src="js/data/objects.js"></script>
<script type="text/javascript" src="js/objects/filter.js"></script>
<script type="text/javascript" src="js/objects/charts.js"></script>
<script type="text/javascript" src="js/objects/map_marker.js"></script>
<script type="text/javascript" src="js/objects/objects_logic.js"></script>

<script type="text/javascript" src="js/objects/obj_view.js"></script>

<script type="text/javascript">

    $(function(){
        filter.init('object-filter');
        charts.init(filter);
    })

    $(function(){
        $('.filter input').change(charts.redrawAllCharts)
        $('.filter input').change(map.rebindMarkers)
        $('.filter input').change(objects_logic.bindOverdueObjects)
        $('.filter input').change(objects_logic.bindObjectsList)
        $('#documents-filter input').change(charts.redrawDocumentChart)
        $('#map-button').click(objects_logic.showMap)
        $('#chart-button').click(objects_logic.showCharts)
        $('#list-button').click(objects_logic.showList)



        $(document).on('pagebeforeshow', "#object_detail", function (event, data) {
            object_shower.init($(this).data("url"))
        });


    })
</script>
</html>